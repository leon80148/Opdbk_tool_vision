# ============================================================================
# 安家診所掛號助手 - 設定檔範例
# ============================================================================
# 版本: v4.4
# 最後更新: 2025-11-23
#
# 使用說明:
# 1. 首次啟動時，程式會自動將此檔案複製為 config.ini
# 2. config.ini 位置：與主程式執行檔同層（安裝目錄下）
# 3. 依據診所實際環境修改各項設定
# 4. 修改完成後重新啟動程式
#
# 檔案結構（所有檔案都在安裝目錄下）:
#   安家診所掛號助手\
#   ├── 安家診所掛號助手.exe
#   ├── config.ini              ← 主設定檔
#   ├── data\                   ← 資料庫檔案（預設位置）
#   │   └── lab_cache.db
#   ├── logs\                   ← 日誌檔案
#   │   ├── app.log
#   │   └── error.log
#   └── resources\              ← 應用程式資源
#       └── config\
#           ├── lab_codes.json
#           └── rules.json
# ============================================================================

# ----------------------------------------------------------------------------
# [database] 資料庫設定
# ----------------------------------------------------------------------------
[database]
# DBF 資料庫根目錄（HIS 系統資料所在位置）
# 注意：Windows 路徑需使用雙反斜線 \\ 或單斜線 /
# 範例：D:\\HIS\\DBF\\ 或 D:/HIS/DBF/
# ⚠️ 請修改為您的實際 HIS 資料庫路徑
dbf_root = D:\\HIS\\DBF\\

# SQLite 快取資料庫檔案路徑
# 預設：安裝目錄下的 data\\lab_cache.db（程式會自動建立）
# 如果需要放在其他位置，請修改此路徑
# 建議放置於 SSD 硬碟以提升效能
# 預設值會在啟動時自動設定為：{安裝目錄}\\data\\lab_cache.db
sqlite_path = .\\data\\lab_cache.db

# DBF 連線方式（可選）
# 選項：odbc（推薦，適用於 Visual FoxPro）、dbf-parser（純 Node.js，可能不支援所有格式）
# 預設：odbc
connection_mode = odbc

# ODBC DSN 名稱（僅在 connection_mode = odbc 時有效）
# 若留空，程式將使用 dbf_root 自動建立暫時連線
# odbc_dsn = ClinicHIS

# 資料庫編碼（DBF 檔案編碼）
# 選項：big5（常見）、utf8
# 預設：big5
encoding = big5

# 預載入歷史資料年數（影響記憶體占用）
# 啟動時會預載入最近 N 年的資料到記憶體中
# 建議：3 年（~150-200MB）/ 5 年（~300-400MB）/ 10 年（~500MB+）
# 預設：3
preload_years_back = 3

# ----------------------------------------------------------------------------
# [hotkey] 全域熱鍵設定
# ----------------------------------------------------------------------------
[hotkey]
# 縮放視窗熱鍵（用於從任何畫面喚出/隱藏助手視窗）
# 格式：Modifier+Key 或 Modifier+Modifier+Key
# 可用修飾鍵：Ctrl, Alt, Shift, Win（Windows 鍵）
# 範例：
#   - Ctrl+1（預設）
#   - Ctrl+Alt+C
#   - Ctrl+Shift+H
#   - Alt+F12
global = Ctrl+1

# 查詢熱鍵（自動抓取剪貼簿中的病歷號並查詢）
# 當按下此熱鍵時，會自動從剪貼簿讀取病歷號或身分證號並查詢
# 預設：Ctrl+2
capture = Ctrl+2

# 熱鍵衝突處理
# 選項：warn（顯示警告但仍嘗試註冊）、fail（註冊失敗時中止啟動）、ignore（忽略註冊失敗）
# 預設：warn
conflict_handling = warn

# ----------------------------------------------------------------------------
# [labs] 檢驗項目設定（已停用，保留供未來使用）
# ----------------------------------------------------------------------------
[labs]
# LabCodeMap 檔案位置（JSON 格式）
# 預設：resources\\config\\lab_codes.json（程式會自動設定）
# 定義檢驗項目代碼與顯示名稱、正常值範圍、警示閾值的對應關係
lab_code_map = .\\resources\\config\\lab_codes.json

# 檢驗數據保留期限（單位：年）
# 初始匯入時只匯入最近 N 年的檢驗資料，避免資料量過大
# 建議範圍：2-5 年
# 預設：3
data_retention_years = 3

# 檢驗值顯示精度（小數位數）
# 預設：2
decimal_places = 2

# ----------------------------------------------------------------------------
# [sync] 資料同步設定
# ----------------------------------------------------------------------------
[sync]
# 同步間隔（單位：分鐘）
# 系統將定期從 CO18H 增量同步檢驗資料到 SQLite
# 建議範圍：5-60 分鐘
# 特殊值：
#   - 0 或負數：停用週期性同步（僅啟動時同步一次）
#   - 1-4：不建議，過於頻繁可能影響 HIS 系統效能
# 預設：10
interval_minutes = 10

# 啟動時立即同步
# 選項：true（推薦，確保資料最新）、false
# 預設：true
sync_on_startup = true

# 同步失敗重試次數
# 當同步失敗時，系統會自動重試 N 次後才記錄錯誤
# 預設：3
retry_count = 3

# 同步失敗重試間隔（單位：秒）
# 預設：30
retry_interval_seconds = 30

# 批次同步大小（筆數）
# 每次同步時，從 CO18H 讀取的最大記錄數
# 過大可能導致記憶體不足，過小會增加同步時間
# 建議範圍：1000-10000
# 預設：5000
batch_size = 5000

# ----------------------------------------------------------------------------
# [rules] 規則引擎設定（已停用，保留供未來使用）
# ----------------------------------------------------------------------------
[rules]
# Smart Action List 規則定義檔案
# JSON 格式，定義衛教提醒、檢查追蹤等規則
# 預設：resources\\config\\rules.json（程式會自動設定）
rules_definition = .\\resources\\config\\rules.json

# 規則評估快取時間（單位：秒）
# 同一病患的規則評估結果會快取 N 秒，避免重複計算
# 預設：60
cache_ttl_seconds = 60

# 最大顯示待辦項目數
# Smart Action List 最多顯示幾個待辦項目
# 過多會造成畫面雜亂
# 預設：10
max_action_items = 10

# ----------------------------------------------------------------------------
# [ui] 使用者介面設定
# ----------------------------------------------------------------------------
[ui]
# 視窗預設寬度（像素）
# 預設：1200
window_width = 1200

# 視窗預設高度（像素）
# 預設：800
window_height = 800

# 視窗 X 座標位置（像素）
# 留空則自動置中
# 範例：100
# window_x = 100

# 視窗 Y 座標位置（像素）
# 留空則自動置中
# 範例：50
# window_y = 50

# 啟動時自動最大化
# 選項：true、false
# 預設：false
start_maximized = false

# 主題模式
# 選項：light（淺色）、dark（深色）、auto（跟隨系統）
# 預設：light
theme = light

# 字體大小（像素）
# 預設：14
font_size = 14

# 病歷號自動補零
# 選項：true（推薦，確保與 DBF 格式一致）、false
# 預設：true
auto_pad_patient_id = true

# ----------------------------------------------------------------------------
# [logging] 日誌設定
# ----------------------------------------------------------------------------
[logging]
# 日誌等級
# 選項：error、warn、info、debug
# 預設：info（正式環境）、debug（開發環境）
log_level = info

# 日誌檔案路徑
# 預設：安裝目錄下的 logs\\app.log（程式會自動設定）
# 若留空，日誌僅輸出到控制台
log_file = .\\logs\\app.log

# 日誌檔案大小上限（MB）
# 超過上限後會自動切割
# 預設：10
log_max_size_mb = 10

# 保留舊日誌檔案數量
# 預設：5（保留最近 5 個切割檔案）
log_max_files = 5

# 遮蔽敏感資料
# 選項：true（推薦，身分證號會遮蔽為 A1******23）、false
# 預設：true
mask_sensitive_data = true

# ----------------------------------------------------------------------------
# [performance] 效能調校
# ----------------------------------------------------------------------------
[performance]
# 查詢超時時間（單位：秒）
# 若查詢超過此時間，將顯示錯誤訊息
# 預設：5
query_timeout_seconds = 5

# SQLite 快取大小（KB）
# 增加快取可提升查詢效能，但會佔用更多記憶體
# 預設：10000（約 10MB）
sqlite_cache_size_kb = 10000

# 啟用查詢結果快取
# 選項：true、false
# 預設：true
enable_query_cache = true

# 查詢結果快取時間（單位：秒）
# 預設：300（5 分鐘）
query_cache_ttl_seconds = 300

# ----------------------------------------------------------------------------
# [security] 安全性設定
# ----------------------------------------------------------------------------
[security]
# SQLite 資料庫加密
# 選項：true、false
# 注意：啟用後需安裝 SQLCipher，並在首次啟動時設定密碼
# 預設：false
encrypt_sqlite = false

# 允許的網路存取
# 選項：none（僅本機）、lan（區域網路）
# 預設：none
network_access = none

# 自動登出時間（單位：分鐘）
# 閒置超過此時間後自動鎖定（需搭配使用者驗證功能）
# 0 表示停用自動登出
# 預設：0（v3.0 暫不支援使用者驗證）
auto_logout_minutes = 0

# ============================================================================
# 設定檔結束
# ============================================================================
